<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block meta %}
    {% endblock %}
    <title>The Noodles Catalog</title>

    <!-- Material Design Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.amber-orange.min.css">
    {% block css %}
    {% endblock %}

    <!-- Custom styles -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/styles.css')}}">

    <!-- MDL script -->
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <!--
    The following script adjusts the MDL footer's position (and visibility)
    based on vertical scroll. Basically, on pages with no scroll (short
    content), the footer is appended (moved) directly to the mdl-layout div.
    On pages with scroll (tall content), the footer is appended directly to
    the main element. As a result, the footer should always display correctly.
    -->
    <script defer src="{{url_for('static', filename='js/footer-fix.js')}}"></script>
    {% block scripts %}
    {% endblock %}
</head>
<body>
    <!-- Header is visible at all viewport sizes -->
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Header title links to the home page -->
                <span class="mdl-layout-title"><a href="{{url_for('index')}}">The Noodles Catalog</a></span>

                <!-- Spacer aligns navigation links to the right -->
                <div class="mdl-layout-spacer"></div>

                <!-- Navigation links. They become hidden on smaller viewport sizes. -->
                <nav class="mdl-navigation mdl-layout--large-screen-only">
                    <!-- For each category in the database, build a dynamic navigation link -->
                    {% for category in categories %}
                        <a class="mdl-navigation__link mdl-typography--text-uppercase" href="{{url_for('show_category', category_arg=category.name.lower())}}">{{category.name}}</a>
                    {% endfor %}
                </nav>
            </div>
        </header>

        <!-- Drawer. It is hidden by default at all viewport sizes. -->
        <div class="mdl-layout__drawer">
            <span class="mdl-layout-title"><a href="{{url_for('index')}}">The Noodles Catalog</a></span>
            <nav class="mdl-navigation">
                {% for category in categories %}
                    <a class="mdl-navigation__link" href="{{url_for('show_category', category_arg=category.name.lower())}}">{{category.name}}</a>
                {% endfor %}
            </nav>
        </div>
        <main class="mdl-layout__content">
            <div class="page-content">
                {% block content %}
                {% endblock %}
            </div>
            <footer class="mdl-mini-footer hidden">
                <div class="mdl-mini-footer__left-section">
                    <div class="mdl-logo"><a href="{{url_for('index')}}">The Noodles Catalog</a></div>
                    <ul class="mdl-mini-footer__link-list">
                        <li><a href="{{url_for('show_login')}}">Log In</a></li>
                        <li><a href="{{url_for('new_item')}}">Add a new item</a></li>
                    </ul>
                </div>
            </footer>
        </main>
    </div>

    {#-
    The following Stack Overflow post helped in deciding to use
    request.endpoint to get the current page:
    https://stackoverflow.com/a/11665879
    -#}
    {% if request.endpoint != 'new_item' %}
        <a href="{{url_for('new_item')}}" id="new-item-button" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-js-ripple-effect mdl-button--primary mdl-shadow--2dp">
            <i class="material-icons">add</i>
        </a>
    {% endif %}
</body>
</html>
